// Package billmodel contains the types for schema 'equinox'.
package billmodel

// GENERATED BY XO. DO NOT EDIT.

import (
	"database/sql"

	"github.com/lib/pq"
)

// Mpma represents a row from 'equinox.mpma'.
type Mpma struct {
	Mpasupplierid  sql.NullString `json:"mpasupplierid"`  // mpasupplierid
	Mpaeffsettdate pq.NullTime    `json:"mpaeffsettdate"` // mpaeffsettdate
	Mpameterid     sql.NullString `json:"mpameterid"`     // mpameterid
	Mpametertype   sql.NullString `json:"mpametertype"`   // mpametertype
	Mpainstalldate pq.NullTime    `json:"mpainstalldate"` // mpainstalldate
	Mpampanecoes   sql.NullString `json:"mpampanecoes"`   // mpampanecoes
	EquinoxPrn     sql.NullInt64  `json:"equinox_prn"`    // equinox_prn
	EquinoxLrn     int64          `json:"equinox_lrn"`    // equinox_lrn
	EquinoxSec     sql.NullInt64  `json:"equinox_sec"`    // equinox_sec
}

func AllMpma(db XODB, callback func(x Mpma) bool) error {

	// sql query
	const sqlstr = `SELECT ` +
		`mpasupplierid, mpaeffsettdate, mpameterid, mpametertype, mpainstalldate, mpampanecoes, equinox_prn, equinox_lrn, equinox_sec ` +
		`FROM equinox.mpma `

	q, err := db.Query(sqlstr)

	if err != nil {
		return err
	}
	defer q.Close()

	// load results
	for q.Next() {
		m := Mpma{}

		// scan
		err = q.Scan(&m.Mpasupplierid, &m.Mpaeffsettdate, &m.Mpameterid, &m.Mpametertype, &m.Mpainstalldate, &m.Mpampanecoes, &m.EquinoxPrn, &m.EquinoxLrn, &m.EquinoxSec)
		if err != nil {
			return err
		}
		if !callback(m) {
			return nil
		}
	}

	return nil
}

// MpmaByEquinoxLrn retrieves a row from 'equinox.mpma' as a Mpma.
//
// Generated from index 'mpma_pkey'.
func MpmaByEquinoxLrn(db XODB, equinoxLrn int64) (*Mpma, error) {
	var err error

	// sql query
	const sqlstr = `SELECT ` +
		`mpasupplierid, mpaeffsettdate, mpameterid, mpametertype, mpainstalldate, mpampanecoes, equinox_prn, equinox_lrn, equinox_sec ` +
		`FROM equinox.mpma ` +
		`WHERE equinox_lrn = $1`

	// run query
	XOLog(sqlstr, equinoxLrn)
	m := Mpma{}

	err = db.QueryRow(sqlstr, equinoxLrn).Scan(&m.Mpasupplierid, &m.Mpaeffsettdate, &m.Mpameterid, &m.Mpametertype, &m.Mpainstalldate, &m.Mpampanecoes, &m.EquinoxPrn, &m.EquinoxLrn, &m.EquinoxSec)
	if err != nil {
		return nil, err
	}

	return &m, nil
}
