// Package billmodel contains the types for schema 'equinox'.
package billmodel

// GENERATED BY XO. DO NOT EDIT.

import (
	"database/sql"

	"github.com/lib/pq"
)

// Mpmb represents a row from 'equinox.mpmb'.
type Mpmb struct {
	Mpbmpancore    sql.NullString `json:"mpbmpancore"`    // mpbmpancore
	Mpbsupplierid  sql.NullString `json:"mpbsupplierid"`  // mpbsupplierid
	Mpbsettledate  pq.NullTime    `json:"mpbsettledate"`  // mpbsettledate
	Mpbmetertype   sql.NullString `json:"mpbmetertype"`   // mpbmetertype
	Mpbinstalldate pq.NullTime    `json:"mpbinstalldate"` // mpbinstalldate
	Mpbmeterecoes  sql.NullString `json:"mpbmeterecoes"`  // mpbmeterecoes
	EquinoxPrn     sql.NullInt64  `json:"equinox_prn"`    // equinox_prn
	EquinoxLrn     int64          `json:"equinox_lrn"`    // equinox_lrn
	EquinoxSec     sql.NullInt64  `json:"equinox_sec"`    // equinox_sec
}

func AllMpmb(db XODB, callback func(x Mpmb) bool) error {

	// sql query
	const sqlstr = `SELECT ` +
		`mpbmpancore, mpbsupplierid, mpbsettledate, mpbmetertype, mpbinstalldate, mpbmeterecoes, equinox_prn, equinox_lrn, equinox_sec ` +
		`FROM equinox.mpmb `

	q, err := db.Query(sqlstr)

	if err != nil {
		return err
	}
	defer q.Close()

	// load results
	for q.Next() {
		m := Mpmb{}

		// scan
		err = q.Scan(&m.Mpbmpancore, &m.Mpbsupplierid, &m.Mpbsettledate, &m.Mpbmetertype, &m.Mpbinstalldate, &m.Mpbmeterecoes, &m.EquinoxPrn, &m.EquinoxLrn, &m.EquinoxSec)
		if err != nil {
			return err
		}
		if !callback(m) {
			return nil
		}
	}

	return nil
}

// MpmbByEquinoxLrn retrieves a row from 'equinox.mpmb' as a Mpmb.
//
// Generated from index 'mpmb_pkey'.
func MpmbByEquinoxLrn(db XODB, equinoxLrn int64) (*Mpmb, error) {
	var err error

	// sql query
	const sqlstr = `SELECT ` +
		`mpbmpancore, mpbsupplierid, mpbsettledate, mpbmetertype, mpbinstalldate, mpbmeterecoes, equinox_prn, equinox_lrn, equinox_sec ` +
		`FROM equinox.mpmb ` +
		`WHERE equinox_lrn = $1`

	// run query
	XOLog(sqlstr, equinoxLrn)
	m := Mpmb{}

	err = db.QueryRow(sqlstr, equinoxLrn).Scan(&m.Mpbmpancore, &m.Mpbsupplierid, &m.Mpbsettledate, &m.Mpbmetertype, &m.Mpbinstalldate, &m.Mpbmeterecoes, &m.EquinoxPrn, &m.EquinoxLrn, &m.EquinoxSec)
	if err != nil {
		return nil, err
	}

	return &m, nil
}
