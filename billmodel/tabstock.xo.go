// Package billmodel contains the types for schema 'equinox'.
package billmodel

// GENERATED BY XO. DO NOT EDIT.

import (
	"database/sql"

	"github.com/lib/pq"
)

// Tabstock represents a row from 'equinox.tabstock'.
type Tabstock struct {
	Tbmakeandmodel   sql.NullString `json:"tbmakeandmodel"`   // tbmakeandmodel
	Tbserialnumber   sql.NullString `json:"tbserialnumber"`   // tbserialnumber
	Tbmacaddress     sql.NullString `json:"tbmacaddress"`     // tbmacaddress
	Tbcontractterm   sql.NullInt64  `json:"tbcontractterm"`   // tbcontractterm
	Tbdateintostock  pq.NullTime    `json:"tbdateintostock"`  // tbdateintostock
	Tbdatesentout    pq.NullTime    `json:"tbdatesentout"`    // tbdatesentout
	Tbwarrantystart  pq.NullTime    `json:"tbwarrantystart"`  // tbwarrantystart
	Tbtrainerid      sql.NullString `json:"tbtrainerid"`      // tbtrainerid
	Tbeventid        sql.NullString `json:"tbeventid"`        // tbeventid
	Tbdeliverymethod sql.NullString `json:"tbdeliverymethod"` // tbdeliverymethod
	Tbtabletgrade    sql.NullString `json:"tbtabletgrade"`    // tbtabletgrade
	Tbmachash        sql.NullString `json:"tbmachash"`        // tbmachash
	Tbpartnerid      sql.NullString `json:"tbpartnerid"`      // tbpartnerid
	Tbtabletgradeper sql.NullString `json:"tbtabletgradeper"` // tbtabletgradeper
	EquinoxLrn       int64          `json:"equinox_lrn"`      // equinox_lrn
	EquinoxSec       sql.NullInt64  `json:"equinox_sec"`      // equinox_sec
}

func AllTabstock(db XODB, callback func(x Tabstock) bool) error {

	// sql query
	const sqlstr = `SELECT ` +
		`tbmakeandmodel, tbserialnumber, tbmacaddress, tbcontractterm, tbdateintostock, tbdatesentout, tbwarrantystart, tbtrainerid, tbeventid, tbdeliverymethod, tbtabletgrade, tbmachash, tbpartnerid, tbtabletgradeper, equinox_lrn, equinox_sec ` +
		`FROM equinox.tabstock `

	q, err := db.Query(sqlstr)

	if err != nil {
		return err
	}
	defer q.Close()

	// load results
	for q.Next() {
		t := Tabstock{}

		// scan
		err = q.Scan(&t.Tbmakeandmodel, &t.Tbserialnumber, &t.Tbmacaddress, &t.Tbcontractterm, &t.Tbdateintostock, &t.Tbdatesentout, &t.Tbwarrantystart, &t.Tbtrainerid, &t.Tbeventid, &t.Tbdeliverymethod, &t.Tbtabletgrade, &t.Tbmachash, &t.Tbpartnerid, &t.Tbtabletgradeper, &t.EquinoxLrn, &t.EquinoxSec)
		if err != nil {
			return err
		}
		if !callback(t) {
			return nil
		}
	}

	return nil
}

// TabstockByEquinoxLrn retrieves a row from 'equinox.tabstock' as a Tabstock.
//
// Generated from index 'tabstock_pkey'.
func TabstockByEquinoxLrn(db XODB, equinoxLrn int64) (*Tabstock, error) {
	var err error

	// sql query
	const sqlstr = `SELECT ` +
		`tbmakeandmodel, tbserialnumber, tbmacaddress, tbcontractterm, tbdateintostock, tbdatesentout, tbwarrantystart, tbtrainerid, tbeventid, tbdeliverymethod, tbtabletgrade, tbmachash, tbpartnerid, tbtabletgradeper, equinox_lrn, equinox_sec ` +
		`FROM equinox.tabstock ` +
		`WHERE equinox_lrn = $1`

	// run query
	XOLog(sqlstr, equinoxLrn)
	t := Tabstock{}

	err = db.QueryRow(sqlstr, equinoxLrn).Scan(&t.Tbmakeandmodel, &t.Tbserialnumber, &t.Tbmacaddress, &t.Tbcontractterm, &t.Tbdateintostock, &t.Tbdatesentout, &t.Tbwarrantystart, &t.Tbtrainerid, &t.Tbeventid, &t.Tbdeliverymethod, &t.Tbtabletgrade, &t.Tbmachash, &t.Tbpartnerid, &t.Tbtabletgradeper, &t.EquinoxLrn, &t.EquinoxSec)
	if err != nil {
		return nil, err
	}

	return &t, nil
}
