// Package billmodel contains the types for schema 'equinox'.
package billmodel

// GENERATED BY XO. DO NOT EDIT.

import (
	"database/sql"

	"github.com/lib/pq"
)

// Call represents a row from 'equinox.calls'.
type Call struct {
	Calldate         pq.NullTime     `json:"calldate"`         // calldate
	Calltime         sql.NullString  `json:"calltime"`         // calltime
	Calldestination  sql.NullString  `json:"calldestination"`  // calldestination
	Calldestnumber   sql.NullString  `json:"calldestnumber"`   // calldestnumber
	Callratingperiod sql.NullString  `json:"callratingperiod"` // callratingperiod
	Callduration     sql.NullFloat64 `json:"callduration"`     // callduration
	Callcarrierband  sql.NullString  `json:"callcarrierband"`  // callcarrierband
	Callwholesale    sql.NullInt64   `json:"callwholesale"`    // callwholesale
	Callretail       sql.NullString  `json:"callretail"`       // callretail
	Callcalcwholesal sql.NullInt64   `json:"callcalcwholesal"` // callcalcwholesal
	Callduplicate    sql.NullInt64   `json:"callduplicate"`    // callduplicate
	Callfileid       sql.NullString  `json:"callfileid"`       // callfileid
	Callcarrier      sql.NullString  `json:"callcarrier"`      // callcarrier
	Callactretail    sql.NullFloat64 `json:"callactretail"`    // callactretail
	Callactretailpre sql.NullFloat64 `json:"callactretailpre"` // callactretailpre
	Calldesttype     sql.NullInt64   `json:"calldesttype"`     // calldesttype
	Callourband      sql.NullString  `json:"callourband"`      // callourband
	Callcustbillingg sql.NullInt64   `json:"callcustbillingg"` // callcustbillingg
	Callpromocode    sql.NullString  `json:"callpromocode"`    // callpromocode
	Callextn         sql.NullString  `json:"callextn"`         // callextn
	EquinoxPrn       sql.NullInt64   `json:"equinox_prn"`      // equinox_prn
	EquinoxLrn       int64           `json:"equinox_lrn"`      // equinox_lrn
	EquinoxSec       sql.NullInt64   `json:"equinox_sec"`      // equinox_sec
}

func AllCall(db XODB, callback func(x Call) bool) error {

	// sql query
	const sqlstr = `SELECT ` +
		`calldate, calltime, calldestination, calldestnumber, callratingperiod, callduration, callcarrierband, callwholesale, callretail, callcalcwholesal, callduplicate, callfileid, callcarrier, callactretail, callactretailpre, calldesttype, callourband, callcustbillingg, callpromocode, callextn, equinox_prn, equinox_lrn, equinox_sec ` +
		`FROM equinox.calls `

	q, err := db.Query(sqlstr)

	if err != nil {
		return err
	}
	defer q.Close()

	// load results
	for q.Next() {
		c := Call{}

		// scan
		err = q.Scan(&c.Calldate, &c.Calltime, &c.Calldestination, &c.Calldestnumber, &c.Callratingperiod, &c.Callduration, &c.Callcarrierband, &c.Callwholesale, &c.Callretail, &c.Callcalcwholesal, &c.Callduplicate, &c.Callfileid, &c.Callcarrier, &c.Callactretail, &c.Callactretailpre, &c.Calldesttype, &c.Callourband, &c.Callcustbillingg, &c.Callpromocode, &c.Callextn, &c.EquinoxPrn, &c.EquinoxLrn, &c.EquinoxSec)
		if err != nil {
			return err
		}
		if !callback(c) {
			return nil
		}
	}

	return nil
}

// CallByEquinoxLrn retrieves a row from 'equinox.calls' as a Call.
//
// Generated from index 'calls_pkey'.
func CallByEquinoxLrn(db XODB, equinoxLrn int64) (*Call, error) {
	var err error

	// sql query
	const sqlstr = `SELECT ` +
		`calldate, calltime, calldestination, calldestnumber, callratingperiod, callduration, callcarrierband, callwholesale, callretail, callcalcwholesal, callduplicate, callfileid, callcarrier, callactretail, callactretailpre, calldesttype, callourband, callcustbillingg, callpromocode, callextn, equinox_prn, equinox_lrn, equinox_sec ` +
		`FROM equinox.calls ` +
		`WHERE equinox_lrn = $1`

	// run query
	XOLog(sqlstr, equinoxLrn)
	c := Call{}

	err = db.QueryRow(sqlstr, equinoxLrn).Scan(&c.Calldate, &c.Calltime, &c.Calldestination, &c.Calldestnumber, &c.Callratingperiod, &c.Callduration, &c.Callcarrierband, &c.Callwholesale, &c.Callretail, &c.Callcalcwholesal, &c.Callduplicate, &c.Callfileid, &c.Callcarrier, &c.Callactretail, &c.Callactretailpre, &c.Calldesttype, &c.Callourband, &c.Callcustbillingg, &c.Callpromocode, &c.Callextn, &c.EquinoxPrn, &c.EquinoxLrn, &c.EquinoxSec)
	if err != nil {
		return nil, err
	}

	return &c, nil
}
