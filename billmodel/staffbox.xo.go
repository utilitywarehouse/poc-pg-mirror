// Package billmodel contains the types for schema 'equinox'.
package billmodel

// GENERATED BY XO. DO NOT EDIT.

import (
	"database/sql"

	"github.com/lib/pq"
)

// Staffbox represents a row from 'equinox.staffbox'.
type Staffbox struct {
	StaffBoxName   sql.NullString `json:"staff_box_name"`   // staff_box_name
	StaffBoxMgr    sql.NullInt64  `json:"staff_box_mgr"`    // staff_box_mgr
	StaffBoxAdded  sql.NullString `json:"staff_box_added"`  // staff_box_added
	StaffBoxDate   pq.NullTime    `json:"staff_box_date"`   // staff_box_date
	StaffBoxStatus sql.NullString `json:"staff_box_status"` // staff_box_status
	StaffBoxSparen sql.NullInt64  `json:"staff_box_sparen"` // staff_box_sparen
	StaffBoxSpared pq.NullTime    `json:"staff_box_spared"` // staff_box_spared
	StaffBoxSparel sql.NullInt64  `json:"staff_box_sparel"` // staff_box_sparel
	StaffBoxSparec sql.NullString `json:"staff_box_sparec"` // staff_box_sparec
	EquinoxPrn     sql.NullInt64  `json:"equinox_prn"`      // equinox_prn
	EquinoxLrn     int64          `json:"equinox_lrn"`      // equinox_lrn
	EquinoxSec     sql.NullInt64  `json:"equinox_sec"`      // equinox_sec
}

func AllStaffbox(db XODB, callback func(x Staffbox) bool) error {

	// sql query
	const sqlstr = `SELECT ` +
		`staff_box_name, staff_box_mgr, staff_box_added, staff_box_date, staff_box_status, staff_box_sparen, staff_box_spared, staff_box_sparel, staff_box_sparec, equinox_prn, equinox_lrn, equinox_sec ` +
		`FROM equinox.staffbox `

	q, err := db.Query(sqlstr)

	if err != nil {
		return err
	}
	defer q.Close()

	// load results
	for q.Next() {
		s := Staffbox{}

		// scan
		err = q.Scan(&s.StaffBoxName, &s.StaffBoxMgr, &s.StaffBoxAdded, &s.StaffBoxDate, &s.StaffBoxStatus, &s.StaffBoxSparen, &s.StaffBoxSpared, &s.StaffBoxSparel, &s.StaffBoxSparec, &s.EquinoxPrn, &s.EquinoxLrn, &s.EquinoxSec)
		if err != nil {
			return err
		}
		if !callback(s) {
			return nil
		}
	}

	return nil
}

// StaffboxByEquinoxLrn retrieves a row from 'equinox.staffbox' as a Staffbox.
//
// Generated from index 'staffbox_pkey'.
func StaffboxByEquinoxLrn(db XODB, equinoxLrn int64) (*Staffbox, error) {
	var err error

	// sql query
	const sqlstr = `SELECT ` +
		`staff_box_name, staff_box_mgr, staff_box_added, staff_box_date, staff_box_status, staff_box_sparen, staff_box_spared, staff_box_sparel, staff_box_sparec, equinox_prn, equinox_lrn, equinox_sec ` +
		`FROM equinox.staffbox ` +
		`WHERE equinox_lrn = $1`

	// run query
	XOLog(sqlstr, equinoxLrn)
	s := Staffbox{}

	err = db.QueryRow(sqlstr, equinoxLrn).Scan(&s.StaffBoxName, &s.StaffBoxMgr, &s.StaffBoxAdded, &s.StaffBoxDate, &s.StaffBoxStatus, &s.StaffBoxSparen, &s.StaffBoxSpared, &s.StaffBoxSparel, &s.StaffBoxSparec, &s.EquinoxPrn, &s.EquinoxLrn, &s.EquinoxSec)
	if err != nil {
		return nil, err
	}

	return &s, nil
}
